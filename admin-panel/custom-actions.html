<script>
    //Custom actions are user definable functions that can be run for individual records with line actions
    //or for multiple records at once with a bulk action.  In both cases, use the 'actionFunction' property
    //to reference the function name here.
    //For simplicty, bulk actions work by by simply looping over the selected records and performing the action
    //line by line.  In this way, both types of function are interoperable.
    //The function is passed the details of the item and the element as context.
    //Access the 'actionRequest' AJAX element on the context to make calls to the API

    //Create the EcoCustom namespace just in case no bundle has already created it
    var EcoCustom = EcoCustom || {};
    EcoCustom.Actions = EcoCustom.Actions || {};

    EcoCustom.Actions.addToppingToPizza = function (item, context) {
        context.$.actionRequest.method = "POST";
        context.$.actionRequest.url = context.apiRoot + "/" + context.schema + "/toppingsperpizza";
        context.$.actionRequest.body = {
            "pizza": context.restrictRecord,
            "topping": item.id,
            "servings": 1
        };
        context.$.actionRequest.generateRequest()
    };

</script>